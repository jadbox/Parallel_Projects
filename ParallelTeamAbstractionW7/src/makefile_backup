MPICC = mpic++
CUDA = /usr/local/cuda
NVCC = $(CUDA)/bin/nvcc -ccbin /usr/bin/clang -m64

all: pt

pt: kernal.o
		$(MPICC) -m64 -o count3Teams -L$(CUDA)/lib  kernal1.o kernal.o ParallelTeam.cpp *.cpp utils/*.cpp -lcudart -lcuda 

kernal.o:
	$(NVCC) -arch=sm_20 -dc kernal.cu -o kernal1.o
	$(NVCC) -arch=sm_20 -dlink kernal1.o -o kernal.o

clean:
	rm -rf *o count3Teams
